{"version":3,"file":"index.es.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/components/ReactSurvey/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { useState, useEffect } from 'react';\n\nimport './index.css';\n\nconst themes = {\n  purple: ['#6D4B94', '#7C6497', '#6D4B943B'],\n  red: ['#E23D3D', '#EF4545', '#FF28283B'],\n  blue: ['#5674E0', '#5674E0', '#5674E03B'],\n  black: ['#303030', '#303030', '#3030303B'],\n  white: ['#ffffff', '#ffffff', '#ffffff3B'],\n  cyan: ['#00BCDD', '#00BCDD', '#00BCDD3B'],\n};\n\nexport const ReactSurvey = ({\n  question,\n  answers,\n  onVote,\n  noStorage,\n  customStyles = {\n    questionSeparator: true,\n    questionSeparatorWidth: 'question',\n    questionBold: true,\n    questionColor: '#303030',\n    align: 'center',\n    theme: 'black',\n  },\n  disable = false,\n}) => {\n  const [totalVotes, setTotalVotes] = useState(0);\n  const [voted, setVoted] = useState(false);\n\n  const calculatePercent = (votes, total) => {\n    if (votes === 0 && total === 0) {\n      return '0%';\n    }\n    return `${parseInt((votes / total) * 100, 10)}%`;\n  };\n\n  const alignPoll = (customAlign) => {\n    if (customAlign === 'left') {\n      return 'flex-start';\n    } else if (customAlign === 'right') {\n      return 'flex-end';\n    } else {\n      return 'center';\n    }\n  };\n  const obtainColors = (customTheme) => {\n    const colors = themes[customTheme];\n    if (!colors) {\n      return themes['black'];\n    }\n    return colors;\n  };\n\n  const colors = obtainColors(customStyles.theme);\n\n  const setPollVote = () => {\n    setVoted(true);\n  };\n\n  const checkVote = () => {\n    const storage = getStoragePolls();\n    const answer = storage.filter((answer) => answer.question === question && answer.url === window.location.href);\n\n    if (answer.length) {\n      setPollVote(answer[0].option);\n    }\n  };\n\n  useEffect(() => {\n    if (!noStorage) checkVote();\n    setTotalVotes(answers.reduce((total, answer) => total + answer.votes, 0));\n  }, []);\n\n  const getStoragePolls = () => JSON.parse(localStorage.getItem('react-polls')) || [];\n  const vote = (answer) => {\n    if (voted === false && !disable) {\n      setTotalVotes(totalVotes + 1);\n      setVoted(!voted);\n      if (!noStorage) {\n        const storage = getStoragePolls();\n        storage.push({\n          url: window.location.href,\n          question: question,\n          option: answer,\n        });\n        localStorage.setItem('react-polls', JSON.stringify(storage));\n      }\n    }\n    onVote(answer);\n  };\n\n  return (\n    <article\n      className={`animate__animated animate__fadeIn animate__faster poll`}\n      style={{\n        textAlign: customStyles.align,\n        alignItems: alignPoll(customStyles.align),\n      }}\n    >\n      <h3\n        className='question'\n        style={{\n          borderWidth: customStyles.questionSeparator ? '1px' : '0',\n          alignSelf: customStyles.questionSeparatorWidth === 'question' ? 'center' : 'stretch',\n          fontWeight: customStyles.questionBold ? 'bold' : 'normal',\n          color: customStyles.questionColor,\n        }}\n      >\n        {question}\n      </h3>\n      <ul className='answers'>\n        {answers.map((answer) => (\n          <li key={answer.option}>\n            {!voted ? (\n              <button\n                className={`animate__animated  animate__fadeIn animate__faster  option ${customStyles.theme}`}\n                style={{ color: colors[0], borderColor: colors[1] }}\n                type='button'\n                onClick={(e) => vote(answer.option)}\n                aria-label={answer.option}\n              >\n                {answer.option}\n              </button>\n            ) : (\n              <div\n                className={`animate__animated animate__fadeIn animate__faster result`}\n                style={{ color: colors[0], borderColor: colors[1] }}\n              >\n                <div\n                  className='fill'\n                  style={{\n                    width: calculatePercent(answer.votes, totalVotes),\n                    backgroundColor: colors[2],\n                  }}\n                />\n                <div className='label'>\n                  <span className='percent' style={{ color: colors[0] }}>\n                    {calculatePercent(answer.votes, totalVotes)}\n                  </span>\n                  <span className={`answer ${voted ? 'vote' : ''}`} style={{ color: colors[0] }}>\n                    {answer.option}\n                  </span>\n                </div>\n              </div>\n            )}\n          </li>\n        ))}\n      </ul>\n      <p className='votes'>{`${totalVotes} vote${totalVotes !== 1 ? 's' : ''}`}</p>\n    </article>\n  );\n};\n"],"names":["themes","purple","red","blue","black","white","cyan","ReactSurvey","question","answers","onVote","noStorage","customStyles","questionSeparator","questionSeparatorWidth","questionBold","questionColor","align","theme","disable","totalVotes","setTotalVotes","useState","voted","setVoted","calculatePercent","votes","total","parseInt","alignPoll","customAlign","obtainColors","customTheme","colors","setPollVote","checkVote","storage","getStoragePolls","answer","filter","url","window","location","href","length","option","useEffect","reduce","JSON","parse","localStorage","getItem","vote","push","setItem","stringify","React","createElement","className","style","textAlign","alignItems","borderWidth","alignSelf","fontWeight","color","map","key","borderColor","type","onClick","e","width","backgroundColor"],"mappings":"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"}
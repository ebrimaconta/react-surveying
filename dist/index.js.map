{"version":3,"file":"index.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/components/ReactSurvey/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { useState, useEffect } from 'react';\n\nimport './index.css';\nimport 'animate.css';\n\nconst themes = {\n  purple: ['#6D4B94', '#7C6497', '#6D4B943B'],\n  red: ['#E23D3D', '#EF4545', '#FF28283B'],\n  blue: ['#5674E0', '#5674E0', '#5674E03B'],\n  black: ['#303030', '#303030', '#3030303B'],\n  white: ['#ffffff', '#ffffff', '#ffffff3B'],\n  cyan: ['#00BCDD', '#00BCDD', '#00BCDD3B'],\n};\n\nexport const ReactSurvey = ({\n  question,\n  answers,\n  onVote,\n  noStorage,\n  customStyles = {\n    questionSeparator: true,\n    questionSeparatorWidth: 'question',\n    questionBold: true,\n    questionColor: '#303030',\n    align: 'center',\n    theme: 'black',\n  },\n  disable = false,\n}) => {\n  const [pollData, setPollData] = useState({\n    poll: {\n      voted: false,\n      option: '',\n    },\n    totalVotes: 0,\n  });\n\n  const calculatePercent = (votes, total) => {\n    if (votes === 0 && total === 0) {\n      return '0%';\n    }\n    return `${parseInt((votes / total) * 100, 10)}%`;\n  };\n\n  const alignPoll = (customAlign) => {\n    if (customAlign === 'left') {\n      return 'flex-start';\n    } else if (customAlign === 'right') {\n      return 'flex-end';\n    } else {\n      return 'center';\n    }\n  };\n  const obtainColors = (customTheme) => {\n    const colors = themes[customTheme];\n    if (!colors) {\n      return themes['black'];\n    }\n    return colors;\n  };\n\n  const colors = obtainColors(customStyles.theme);\n\n  const setPollVote = (selectedAnswer) => {\n    const optionsOnly = answers.map((item) => item.option);\n    console.log('selectedAnswer', selectedAnswer);\n    if (optionsOnly.includes(selectedAnswer)) {\n      const { poll, totalVotes } = pollData;\n      const updatedPoll = {\n        ...poll,\n        voted: true,\n        option: selectedAnswer,\n      };\n\n      if (!disable) {\n        if (!poll.voted) {\n          setPollData(() => ({\n            poll: updatedPoll,\n            totalVotes: totalVotes + 1,\n          }));\n          console.log('not voted');\n        } else {\n          console.log(' voted');\n          setPollData((prev) => ({\n            ...prev,\n            poll: updatedPoll,\n          }));\n        }\n      }\n    }\n  };\n\n  const checkVote = () => {\n    const storage = getStoragePolls();\n    const answer = storage.filter((answer) => answer.question === question && answer.url === window.location.href);\n\n    if (answer.length) {\n      setPollVote(answer[0].option);\n    }\n  };\n\n  useEffect(() => {\n    if (!noStorage) checkVote();\n\n    setPollData((prev) => ({\n      ...prev,\n      totalVotes: answers.reduce((total, answer) => total + answer.votes, 0),\n    }));\n  }, []);\n\n  const getStoragePolls = () => JSON.parse(localStorage.getItem('react-polls')) || [];\n  const vote = (answer) => {\n    if (!noStorage) {\n      const storage = getStoragePolls();\n      storage.push({\n        url: window.location.href,\n        question: question,\n        option: answer,\n      });\n      localStorage.setItem('react-polls', JSON.stringify(storage));\n    }\n    setPollVote(answer);\n    onVote(answer);\n  };\n  const { poll, totalVotes } = pollData;\n  return (\n    <article\n      className={`animate__animated animate__fadeIn animate__faster poll`}\n      style={{\n        textAlign: customStyles.align,\n        alignItems: alignPoll(customStyles.align),\n      }}\n    >\n      <h3\n        className='question'\n        style={{\n          borderWidth: customStyles.questionSeparator ? '1px' : '0',\n          alignSelf: customStyles.questionSeparatorWidth === 'question' ? 'center' : 'stretch',\n          fontWeight: customStyles.questionBold ? 'bold' : 'normal',\n          color: customStyles.questionColor,\n        }}\n      >\n        {question}\n      </h3>\n      <ul className='answers'>\n        {answers.map((answer) => (\n          <li key={answer.option}>\n            {!poll.voted ? (\n              <button\n                className={`animate__animated  animate__fadeIn animate__faster  option ${customStyles.theme}`}\n                style={{ color: colors[0], borderColor: colors[1] }}\n                type='button'\n                onClick={() => vote(answer.option)}\n                aria-label={answer.option}\n              >\n                {answer.option}\n              </button>\n            ) : (\n              <div\n                className={`animate__animated animate__fadeIn animate__faster result`}\n                style={{ color: colors[0], borderColor: colors[1] }}\n              >\n                <div\n                  className='fill'\n                  style={{\n                    width: calculatePercent(answer.votes, totalVotes),\n                    backgroundColor: colors[2],\n                  }}\n                />\n                <div className='label'>\n                  <span className='percent' style={{ color: colors[0] }}>\n                    {calculatePercent(answer.votes, totalVotes)}\n                  </span>\n                  <span\n                    className={`answer ${answer.option === poll.option ? 'vote' : ''}`}\n                    style={{ color: colors[0] }}\n                  >\n                    {answer.option}\n                  </span>\n                </div>\n              </div>\n            )}\n          </li>\n        ))}\n      </ul>\n      <p className='votes'>{`${totalVotes} vote${totalVotes !== 1 ? 's' : ''}`}</p>\n    </article>\n  );\n};\n"],"names":["themes","purple","red","blue","black","white","cyan","ReactSurvey","question","answers","onVote","noStorage","customStyles","questionSeparator","questionSeparatorWidth","questionBold","questionColor","align","theme","disable","pollData","setPollData","useState","poll","voted","option","totalVotes","calculatePercent","votes","total","parseInt","alignPoll","customAlign","obtainColors","customTheme","colors","setPollVote","selectedAnswer","optionsOnly","map","item","console","log","includes","updatedPoll","prev","checkVote","storage","getStoragePolls","answer","filter","url","window","location","href","length","useEffect","reduce","JSON","parse","localStorage","getItem","vote","push","setItem","stringify","React","createElement","className","style","textAlign","alignItems","borderWidth","alignSelf","fontWeight","color","key","borderColor","type","onClick","width","backgroundColor"],"mappings":";;;;;;;;;;AAAA,SAAS,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE;EAC7B,KAAK,GAAG,KAAK,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC;EAC/B,IAAI,QAAQ,GAAG,GAAG,CAAC,QAAQ,CAAC;;EAE5B,IAAI,CAAC,GAAG,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE,EAAE,OAAO,EAAE;;EAExD,IAAI,IAAI,GAAG,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;EACrE,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;EAC5C,KAAK,CAAC,IAAI,GAAG,UAAU,CAAC;;EAExB,IAAI,QAAQ,KAAK,KAAK,EAAE;IACtB,IAAI,IAAI,CAAC,UAAU,EAAE;MACnB,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;KAC3C,MAAM;MACL,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;KACzB;GACF,MAAM;IACL,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;GACzB;;EAED,IAAI,KAAK,CAAC,UAAU,EAAE;IACpB,KAAK,CAAC,UAAU,CAAC,OAAO,GAAG,GAAG,CAAC;GAChC,MAAM;IACL,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC;GACjD;CACF;;;;;ACpBD,MAAMA,MAAM,GAAG;EACbC,MAAM,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,WAAW,CAAC;EAC3CC,GAAG,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,WAAW,CAAC;EACxCC,IAAI,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,WAAW,CAAC;EACzCC,KAAK,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,WAAW,CAAC;EAC1CC,KAAK,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,WAAW,CAAC;EAC1CC,IAAI,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,WAAW;CACzC;AAED,MAAaC,WAAW,GAAGA,CAAC;EAC1BC,QAAQ;EACRC,OAAO;EACPC,MAAM;EACNC,SAAS;EACTC,YAAY,GAAG;IACbC,iBAAiB,EAAE,IAAI;IACvBC,sBAAsB,EAAE,UAAU;IAClCC,YAAY,EAAE,IAAI;IAClBC,aAAa,EAAE,SAAS;IACxBC,KAAK,EAAE,QAAQ;IACfC,KAAK,EAAE;GACR;EACDC,OAAO,GAAG;CACX,KAAK;EACJ,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGC,cAAQ,CAAC;IACvCC,IAAI,EAAE;MACJC,KAAK,EAAE,KAAK;MACZC,MAAM,EAAE;KACT;IACDC,UAAU,EAAE;GACb,CAAC;EAEF,MAAMC,gBAAgB,GAAGA,CAACC,KAAK,EAAEC,KAAK,KAAK;IACzC,IAAID,KAAK,KAAK,CAAC,IAAIC,KAAK,KAAK,CAAC,EAAE;MAC9B,OAAO,IAAI;;IAEb,OAAQ,GAAEC,QAAQ,CAAEF,KAAK,GAAGC,KAAK,GAAI,GAAG,EAAE,EAAE,CAAE,GAAE;GACjD;EAED,MAAME,SAAS,GAAIC,WAAW,IAAK;IACjC,IAAIA,WAAW,KAAK,MAAM,EAAE;MAC1B,OAAO,YAAY;KACpB,MAAM,IAAIA,WAAW,KAAK,OAAO,EAAE;MAClC,OAAO,UAAU;KAClB,MAAM;MACL,OAAO,QAAQ;;GAElB;EACD,MAAMC,YAAY,GAAIC,WAAW,IAAK;IACpC,MAAMC,MAAM,GAAGnC,MAAM,CAACkC,WAAW,CAAC;IAClC,IAAI,CAACC,MAAM,EAAE;MACX,OAAOnC,MAAM,CAAC,OAAO,CAAC;;IAExB,OAAOmC,MAAM;GACd;EAED,MAAMA,MAAM,GAAGF,YAAY,CAACrB,YAAY,CAACM,KAAK,CAAC;EAE/C,MAAMkB,WAAW,GAAIC,cAAc,IAAK;IACtC,MAAMC,WAAW,GAAG7B,OAAO,CAAC8B,GAAG,CAAEC,IAAI,IAAKA,IAAI,CAACf,MAAM,CAAC;IACtDgB,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEL,cAAc,CAAC;IAC7C,IAAIC,WAAW,CAACK,QAAQ,CAACN,cAAc,CAAC,EAAE;MACxC,MAAM;QAAEd,IAAI;QAAEG;OAAY,GAAGN,QAAQ;MACrC,MAAMwB,WAAW,GAAG;QAClB,GAAGrB,IAAI;QACPC,KAAK,EAAE,IAAI;QACXC,MAAM,EAAEY;OACT;MAED,IAAI,CAAClB,OAAO,EAAE;QACZ,IAAI,CAACI,IAAI,CAACC,KAAK,EAAE;UACfH,WAAW,CAAC,OAAO;YACjBE,IAAI,EAAEqB,WAAW;YACjBlB,UAAU,EAAEA,UAAU,GAAG;WAC1B,CAAC,CAAC;UACHe,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;SACzB,MAAM;UACLD,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;UACrBrB,WAAW,CAAEwB,IAAI,KAAM;YACrB,GAAGA,IAAI;YACPtB,IAAI,EAAEqB;WACP,CAAC,CAAC;;;;GAIV;EAED,MAAME,SAAS,GAAGA,MAAM;IACtB,MAAMC,OAAO,GAAGC,eAAe,EAAE;IACjC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAED,MAAM,IAAKA,MAAM,CAACzC,QAAQ,KAAKA,QAAQ,IAAIyC,MAAM,CAACE,GAAG,KAAKC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAC;IAE9G,IAAIL,MAAM,CAACM,MAAM,EAAE;MACjBnB,WAAW,CAACa,MAAM,CAAC,CAAC,CAAC,CAACxB,MAAM,CAAC;;GAEhC;EAED+B,eAAS,CAAC,MAAM;IACd,IAAI,CAAC7C,SAAS,EAAEmC,SAAS,EAAE;IAE3BzB,WAAW,CAAEwB,IAAI,KAAM;MACrB,GAAGA,IAAI;MACPnB,UAAU,EAAEjB,OAAO,CAACgD,MAAM,CAAC,CAAC5B,KAAK,EAAEoB,MAAM,KAAKpB,KAAK,GAAGoB,MAAM,CAACrB,KAAK,EAAE,CAAC;KACtE,CAAC,CAAC;GACJ,EAAE,EAAE,CAAC;EAEN,MAAMoB,eAAe,GAAGA,MAAMU,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CAAC,IAAI,EAAE;EACnF,MAAMC,IAAI,GAAIb,MAAM,IAAK;IACvB,IAAI,CAACtC,SAAS,EAAE;MACd,MAAMoC,OAAO,GAAGC,eAAe,EAAE;MACjCD,OAAO,CAACgB,IAAI,CAAC;QACXZ,GAAG,EAAEC,MAAM,CAACC,QAAQ,CAACC,IAAI;QACzB9C,QAAQ,EAAEA,QAAQ;QAClBiB,MAAM,EAAEwB;OACT,CAAC;MACFW,YAAY,CAACI,OAAO,CAAC,aAAa,EAAEN,IAAI,CAACO,SAAS,CAAClB,OAAO,CAAC,CAAC;;IAE9DX,WAAW,CAACa,MAAM,CAAC;IACnBvC,MAAM,CAACuC,MAAM,CAAC;GACf;EACD,MAAM;IAAE1B,IAAI;IAAEG;GAAY,GAAGN,QAAQ;EACrC,oBACE8C,cAAA,CAAAC,aAAA;IACEC,SAAS,EAAG,wDAAwD;IACpEC,KAAK,EAAE;MACLC,SAAS,EAAE1D,YAAY,CAACK,KAAK;MAC7BsD,UAAU,EAAExC,SAAS,CAACnB,YAAY,CAACK,KAAK;;kBAG1CiD,cAAA,CAAAC,aAAA;IACEC,SAAS,EAAC,UAAU;IACpBC,KAAK,EAAE;MACLG,WAAW,EAAE5D,YAAY,CAACC,iBAAiB,GAAG,KAAK,GAAG,GAAG;MACzD4D,SAAS,EAAE7D,YAAY,CAACE,sBAAsB,KAAK,UAAU,GAAG,QAAQ,GAAG,SAAS;MACpF4D,UAAU,EAAE9D,YAAY,CAACG,YAAY,GAAG,MAAM,GAAG,QAAQ;MACzD4D,KAAK,EAAE/D,YAAY,CAACI;;KAGrBR,QACC,CAAC,eACL0D,cAAA,CAAAC,aAAA;IAAIC,SAAS,EAAC;KACX3D,OAAO,CAAC8B,GAAG,CAAEU,MAAM,iBAClBiB,cAAA,CAAAC,aAAA;IAAIS,GAAG,EAAE3B,MAAM,CAACxB;KACb,CAACF,IAAI,CAACC,KAAK,gBACV0C,cAAA,CAAAC,aAAA;IACEC,SAAS,EAAG,8DAA6DxD,YAAY,CAACM,KAAM,EAAE;IAC9FmD,KAAK,EAAE;MAAEM,KAAK,EAAExC,MAAM,CAAC,CAAC,CAAC;MAAE0C,WAAW,EAAE1C,MAAM,CAAC,CAAC;KAAI;IACpD2C,IAAI,EAAC,QAAQ;IACbC,OAAO,EAAEA,MAAMjB,IAAI,CAACb,MAAM,CAACxB,MAAM,CAAE;IACnC,cAAYwB,MAAM,CAACxB;KAElBwB,MAAM,CAACxB,MACF,CAAC,gBAETyC,cAAA,CAAAC,aAAA;IACEC,SAAS,EAAG,0DAA0D;IACtEC,KAAK,EAAE;MAAEM,KAAK,EAAExC,MAAM,CAAC,CAAC,CAAC;MAAE0C,WAAW,EAAE1C,MAAM,CAAC,CAAC;;kBAEhD+B,cAAA,CAAAC,aAAA;IACEC,SAAS,EAAC,MAAM;IAChBC,KAAK,EAAE;MACLW,KAAK,EAAErD,gBAAgB,CAACsB,MAAM,CAACrB,KAAK,EAAEF,UAAU,CAAC;MACjDuD,eAAe,EAAE9C,MAAM,CAAC,CAAC;;GAE5B,CAAC,eACF+B,cAAA,CAAAC,aAAA;IAAKC,SAAS,EAAC;kBACbF,cAAA,CAAAC,aAAA;IAAMC,SAAS,EAAC,SAAS;IAACC,KAAK,EAAE;MAAEM,KAAK,EAAExC,MAAM,CAAC,CAAC;;KAC/CR,gBAAgB,CAACsB,MAAM,CAACrB,KAAK,EAAEF,UAAU,CACtC,CAAC,eACPwC,cAAA,CAAAC,aAAA;IACEC,SAAS,EAAG,UAASnB,MAAM,CAACxB,MAAM,KAAKF,IAAI,CAACE,MAAM,GAAG,MAAM,GAAG,EAAG,EAAE;IACnE4C,KAAK,EAAE;MAAEM,KAAK,EAAExC,MAAM,CAAC,CAAC;;KAEvBc,MAAM,CAACxB,MACJ,CACH,CACF,CAEL,CACL,CACC,CAAC,eACLyC,cAAA,CAAAC,aAAA;IAAGC,SAAS,EAAC;KAAU,GAAE1C,UAAW,QAAOA,UAAU,KAAK,CAAC,GAAG,GAAG,GAAG,EAAG,EAAK,CACrE,CAAC;CAEb;;;;"}